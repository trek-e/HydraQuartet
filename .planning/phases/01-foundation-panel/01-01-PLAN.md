---
phase: 01-foundation-panel
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - plugin.json
  - plugin.hpp
  - plugin.cpp
  - Makefile
  - res/HydraQuartetVCO.svg
autonomous: true

must_haves:
  truths:
    - "Plugin scaffold compiles with VCV Rack SDK"
    - "Panel design is 36 HP with all future controls and ports laid out"
    - "Component layer has correct colors for helper.py parsing"
    - "Output ports are visually distinguished from inputs"
  artifacts:
    - path: "plugin.json"
      provides: "Plugin manifest with slug, version, module list"
      contains: "HydraQuartetVCO"
    - path: "plugin.hpp"
      provides: "Plugin-level declarations"
      contains: "extern Plugin"
    - path: "Makefile"
      provides: "Build configuration"
      contains: "RACK_DIR"
    - path: "res/HydraQuartetVCO.svg"
      provides: "36 HP panel with component markers"
      min_lines: 50
  key_links:
    - from: "Makefile"
      to: "RACK_DIR environment variable"
      via: "include directive"
      pattern: "include.*RACK_DIR"
---

<objective>
Set up VCV Rack SDK development environment and create the 36 HP panel design for HydraQuartet VCO.

Purpose: Establish the foundational infrastructure that all subsequent phases depend on - working build system and panel layout.

Output:
- Plugin scaffold that compiles (plugin.json, plugin.hpp, plugin.cpp, Makefile)
- Panel SVG (36 HP) with all component placements marked for helper.py
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-panel/01-CONTEXT.md
@.planning/phases/01-foundation-panel/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create plugin scaffold with helper.py</name>
  <files>plugin.json, plugin.hpp, plugin.cpp, Makefile</files>
  <action>
1. Verify VCV Rack SDK is available (check RACK_DIR environment variable or locate SDK)
2. Run helper.py createplugin to generate plugin scaffold:
   - Plugin slug: "HydraQuartet" (brand name)
   - Plugin name: "HydraQuartet"
   - Version: "2.0.0"
   - License: "GPL-3.0-or-later"

3. If RACK_DIR is not set, the user will need to:
   - Download Rack SDK from https://vcvrack.com/downloads (match their platform)
   - Set RACK_DIR=/path/to/Rack-SDK

4. Verify scaffold by running `make` - should compile empty plugin without errors

Use helper.py (located at $RACK_DIR/helper.py) - do NOT hand-create these files.
  </action>
  <verify>
- `ls plugin.json plugin.hpp plugin.cpp Makefile` shows all four files exist
- `make` completes without errors (creates plugin.dylib/.so/.dll)
  </verify>
  <done>
Plugin scaffold compiles successfully with VCV Rack SDK
  </done>
</task>

<task type="auto">
  <name>Task 2: Design 36 HP panel in Inkscape SVG</name>
  <files>res/HydraQuartetVCO.svg</files>
  <action>
Create panel SVG following VCV standards and CONTEXT.md decisions:

**Document Setup:**
- Width: 182.88mm (36 HP x 5.08mm)
- Height: 128.5mm (Eurorack 3U)
- Units: millimeters

**Visual Style (from CONTEXT.md):**
- Background: Dark blue/navy (#1a1a2e or similar industrial dark)
- Industrial/technical aesthetic
- Pointer knobs (line indicator style)
- Color-coded labels by function

**Layout (from CONTEXT.md):**
- VCO1 section on left (~15 HP)
- Global controls in center column (~6 HP)
- VCO2 section on right (~15 HP)

**Component Layer (for helper.py):**
Create layer named "components" with colored shapes:
- Red (#ff0000): Parameters (knobs, switches)
- Green (#00ff00): Inputs
- Blue (#0000ff): Outputs
- Name each component in Object Properties (becomes C++ enum)

**Components to place (full module layout - Phase 1 places ALL controls for final panel):**

VCO1 Section (left):
- OCTAVE1_PARAM: Octave switch (red)
- DETUNE1_PARAM: Detune knob (red)
- TRI1_PARAM, SQR1_PARAM, SIN1_PARAM, SAW1_PARAM: Waveform volume knobs in row (red)
- PWM1_PARAM: PWM knob (red)
- SYNC1_PARAM: Sync switch (red)
- PWM1_INPUT: PWM CV input (green)
- Label: "VCO 1"

VCO2 Section (right, mirror layout):
- OCTAVE2_PARAM: Octave switch (red)
- FINE2_PARAM: Fine tune knob (red, placeholder for v2)
- TRI2_PARAM, SQR2_PARAM, SIN2_PARAM, SAW2_PARAM: Waveform volume knobs in row (red)
- PWM2_PARAM: PWM knob (red)
- SYNC2_PARAM: Sync switch (red)
- FM_PARAM: FM Amount knob (red)
- PWM2_INPUT: PWM CV input (green)
- FM_INPUT: FM CV input (green)
- Label: "VCO 2"

Center Global Section:
- VOCT_INPUT: V/Oct polyphonic input (green)
- GATE_INPUT: Gate polyphonic input (green)
- AUDIO_OUTPUT: Polyphonic audio output (blue) - visually distinguished
- MIX_OUTPUT: Mix mono output (blue) - visually distinguished
- Module title: "TRIAX VCO" or similar

**Output distinction (PANEL-03):**
- Output jacks on darker/colored background plate
- Or use inverted circle style
- Must be visually different from inputs at a glance

**Spacing:**
- Minimum 10mm between knob edges
- Minimum 7mm between port centers
- Thumbs must fit between adjacent controls

**Final Steps:**
1. Convert ALL text to paths (Path > Object to Path)
2. Hide components layer
3. Save as Plain SVG

Note: This is the FULL panel layout. Not all controls will be wired in Phase 1 - only V/Oct, Gate, Audio Out, and Mix Out will be functional initially. Other controls are placed now for consistent panel across all phases.
  </action>
  <verify>
- `file res/HydraQuartetVCO.svg` shows SVG file exists
- Panel width is 182.88mm when opened in Inkscape
- Components layer exists with red/green/blue markers
- All component names are set in Object Properties
- No text objects remain (all converted to paths)
  </verify>
  <done>
36 HP panel SVG exists with all components placed, component layer has correct colors, outputs visually distinct from inputs
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `make` compiles without errors
2. `ls res/HydraQuartetVCO.svg` shows panel exists
3. Panel opened in Inkscape shows correct 36 HP dimensions (182.88mm x 128.5mm)
4. Components layer visible with proper color coding
</verification>

<success_criteria>
- Plugin scaffold compiles with `make`
- Panel SVG is 36 HP with all controls and ports laid out
- Component layer follows VCV color conventions (red params, green inputs, blue outputs)
- Output ports visually distinguished from inputs in panel design
- Ready for Plan 02 to run helper.py createmodule
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-panel/01-01-SUMMARY.md`
</output>
